#consensus, #raft, #paxos, #zab
Why?
1. Agreement: Consensus algorithms aim to achieve agreement among a group of nodes regarding a single value or a sequence of operations. All nodes in the system should eventually agree on the same decision.

2. Fault Tolerance: Consensus algorithms are designed to handle node failures, communication delays, and network partitions. They ensure that the system can continue to make progress even in the presence of failures.

3. Safety: Consensus algorithms ensure safety by guaranteeing that only one value or decision is agreed upon. Conflicting decisions are prevented to maintain data consistency.

4. Liveness: Liveness ensures that the system can make progress and continue to agree on new values or decisions even in the absence of failures.

5. Quorum: Many consensus algorithms require a quorum, which is a majority of nodes, to agree on a value before it is accepted or committed. This helps ensure that enough nodes have seen and accepted the value.
6. Two-Phase Approach: Most consensus algorithms follow a two-phase approach, where proposals are first prepared and then accepted. This reduces the likelihood of conflicts and ensures safety.

7. Leader-Based or Leaderless: Some consensus algorithms use a leader-based approach, where a designated leader coordinates the consensus process, while others are leaderless, where nodes work collaboratively to achieve consensus.

8. Message Exchange: Nodes communicate with each other by exchanging messages to propose values, vote, and inform each other about their states.

9. Log Replication: Many consensus algorithms include log replication mechanisms to ensure that all nodes have a consistent view of the data.

10. Consistency and Replication: Consensus algorithms ensure data consistency across replicas by replicating data and ensuring that all replicas agree on the same data.

11. Membership Changes: Some consensus algorithms support dynamic changes in the membership of the cluster, allowing nodes to join or leave the system gracefully.

12. Performance Trade-offs: Different consensus algorithms offer varying trade-offs between fault tolerance, performance, and simplicity. Some prioritize simplicity for understandability, while others prioritize performance in large-scale systems.




| **Paxos**                                                                                                                                                                                                                                                                                                                          | **Raft**                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | ZAB                                                                                                                                                                                                                                                                                                                                       |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - Semantics: Paxos is fundamentally about reaching agreement in a network of unreliable components. It ensures that a single value is agreed upon among the participants, even if some of them fail.<br>                                                                                                                           | - Semantics: Raft’s primary goal is to simplify the consensus process. It breaks down the process into smaller subproblems.                                                                                                                                                                                                                                                                                                                                                         | - Semantics: ZAB is about total order broadcast. It ensures all actions are executed in the same order across all nodes.                                                                                                                                                                                                                  |
| - Intuition: Imagine a group of people trying to decide on a place to eat. They propose options and vote, ensuring they eventually agree on one place, even if some members are indecisive or change their minds. The key is that once a decision is made, it’s final.                                                             | - Intuition: Picture a classroom where students elect a class representative. This representative then takes decisions on behalf of the class, ensuring everyone’s on the same page. If the representative is absent, a new one is elected.                                                                                                                                                                                                                                         | - Intuition: Think of a series of tasks that need to be executed in a specific sequence. ZAB ensures that this sequence is maintained across all nodes, ensuring consistency.                                                                                                                                                             |
| - Phases: Paxos operates mainly in two phases — Prepare and Accept. The Prepare phase is about proposing a value, and the Accept phase is about agreeing on it.                                                                                                                                                                    | Leader Election: Raft has a unique approach to leader election. A new leader is elected whenever the current one fails. This ensures system availability.and CDN                                                                                                                                                                                                                                                                                                                    | - Election Phase: A leader is elected. This is crucial for the subsequent phases.<br>- Discovery Phase: The leader establishes synchronization with all followers. This ensures that all nodes start from a consistent state.<br>- Broadcast Phase: The leader broadcasts client updates. This ensures that all nodes have the same data. |
| - Paxos does not natively handle membership changes, and modifying the group of participants requires additional coordination mechanisms.                                                                                                                                                                                          | - In Raft, nodes use randomized timeouts to elect a leader. Each node has a timeout period, and when it times out, it becomes a candidate and starts a leader election process.<br>- The candidate sends a “request for votes” to other nodes. If a node has not voted for any other candidate in the current term and it has not already become a leader, it votes for the candidate.<br>- If a candidate receives votes from a quorum of nodes (majority), it becomes the leader. |                                                                                                                                                                                                                                                                                                                                           |
| - Multi-Paxos: An optimization where one node remains the leader until it fails, reducing the number of messages. This is especially useful in systems where leadership changes are costly.                                                                                                                                        | - Log Replication: The leader is responsible for log replication. It ensures that all logs are consistent across nodes.<br>- The leader receives client requests and appends them to its log, forming log entries.<br>- The leader then sends the log entries to followers (other nodes) to replicate the data.<br>- Once a log entry is replicated to a quorum of nodes, the leader commits the entry and notifies followers to apply the log entry to their state machines.       |                                                                                                                                                                                                                                                                                                                                           |
| - Both Paxos and Raft achieve safety, ensuring that a single value is agreed upon by all nodes when a decision is reached.<br>- Paxos prioritizes safety over liveness, meaning it focuses on ensuring that decisions are not made prematurely or inconsistently. This can lead to a slower recovery in certain failure scenarios. | - Raft ensures safety by always having the most up-to-date log on the leader. If a follower discovers a more recent log from another node, it reverts to the follower state and follows the new leader.                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                           |
| - Advantages: Proven correctness and wide applicability. It’s a foundation for many other consensus algorithms.                                                                                                                                                                                                                    | - Advantages: Its main advantage is its simplicity. It’s easier to understand and implement than Paxos.                                                                                                                                                                                                                                                                                                                                                                             | - Advantages: Tailored for ZooKeeper’s needs, ensuring strong consistency.                                                                                                                                                                                                                                                                |
| - Disadvantages: Its complexity makes it hard to implement and understand. Many systems opt for simpler algorithms due to this.                                                                                                                                                                                                    | - Disadvantages: Some argue it’s not as generalized as Paxos. However, its simplicity often outweighs this disadvantage.                                                                                                                                                                                                                                                                                                                                                            | - Disadvantages: It’s specific to ZooKeeper’s use case. This might make it less suitable for other applications.                                                                                                                                                                                                                          |
| - Distributed Databases: Systems like Google’s Spanner employ Paxos for global consistency. It ensures that data is consistent across global data centers.<br>- Configuration Management: Chubby, a lock service by Google, uses Paxos. It ensures that configuration data is consistent.                                          | - Storage Systems: CockroachDB, a distributed SQL database, uses Raft. It ensures data consistency across nodes.<br>- Service Orchestration: Kubernetes, the container orchestration system, employs etcd which uses Raft. It ensures that configuration data is consistent across nodes.                                                                                                                                                                                           | - Distributed Coordination: Apache ZooKeeper, which uses ZAB, is pivotal for systems like Kafka. It ensures that nodes in a distributed system coordinate effectively.                                                                                                                                                                    |
[[The Art of Coordination]]
[[Zookeeper]]
https://medium.com/@mayilb77/distributed-consensus-the-power-of-raft-in-leader-election-072489737423?source=post_page---author_recirc--4132dc6d645f----1---------------------8c94244a_021d_4db4_97d8_f40567c89a99--------------
[[Pages/General/Readwise/Books/Paxos vs Raft]]
